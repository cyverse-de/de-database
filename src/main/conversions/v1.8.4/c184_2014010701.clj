(ns facepalm.c184-2014010701
  (:use [korma.core])
  (:import [java.util UUID]))

(def ^:private version
  "The destination database version."
  "1.8.4:20140107.01")

(defn- str->uuid
  "Converts a string representation of a UUID to a UUID class."
  [s]
  (UUID/fromString s))

(def ^:private metadata-templates
  [["40AC191F-BB36-4F4E-85FB-8B50ABEC8E10", "Minimum Information for a Eukaryotic Genome Sequence (MIGS)"],
   ["F52A4D57-00AF-43EC-97D5-1C7E7779F6C3", "Minimum Information for a Metagenomic Sequence (MIMS)"]])

(def ^:private migs-attributes
  [["40AC191F-BB36-4F4E-85FB-8B50ABEC8E10",
    "submitted to insdc",
    "Depending on the study (large-scale e.g. done with next generation sequencing technology, or small-scale) sequences have to be submitted to SRA (Sequence Read Archive), DRA (DDBJ Read Archive) or via the classical Webin/Sequin systems to Genbank, ENA and DDBJ",
    true,
    "8130EC25-2452-4FF0-B66A-D9D3A6350816"],
   ["40AC191F-BB36-4F4E-85FB-8B50ABEC8E10",
    "investigation type",
    "Nucleic Acid Sequence Report is the root element of all MIGS/MIMS compliant reports as standardized by Genomic Standards Consortium. This field is either eukaryote,bacteria,virus,plasmid,organelle, metagenome, miens-survey or miens-culture",
    true,
    "C29B0B10-D660-4582-9EB7-40C4F1699DD6"],
   ["40AC191F-BB36-4F4E-85FB-8B50ABEC8E10",
    "project name",
    "Name of the project within which the sequencing was organized",
    true,
    "127036FF-EF19-4665-A9A9-7A6878D9813A"],
   ["40AC191F-BB36-4F4E-85FB-8B50ABEC8E10",
    "experimental factor",
    "Experimental factors are essentially the variable aspects of an experiment design which can be used to describe an experiment, or set of experiments, in an increasingly detailed manner. This field accepts ontology terms from Experimental Factor Ontology (EFO) and/or Ontology for Biomedical Investigations (OBI). For a browser of EFO (v132) terms, please see http://bioportal.bioontology.org/visualize/44641; for a browser of OBI (v1.0) terms please see http://bioportal.bioontology.org/visualize/40832",
    false,
    "127036FF-EF19-4665-A9A9-7A6878D9813A"],
   ["40AC191F-BB36-4F4E-85FB-8B50ABEC8E10",
    "geographic location (latitude)",
    "The geographical origin of the sample as defined by latitude and longitude. The values should be reported in decimal degrees and in WGS84 system",
    true,
    "29F9F4FD-594C-493D-9560-FE8851084870"],
   ["40AC191F-BB36-4F4E-85FB-8B50ABEC8E10",
    "geographic location (longitude)",
    "The geographical origin of the sample as defined by latitude and longitude. The values should be reported in decimal degrees and in WGS84 system",
    true,
    "29F9F4FD-594C-493D-9560-FE8851084870"],
   ["40AC191F-BB36-4F4E-85FB-8B50ABEC8E10",
    "geographic location (country and/or sea)",
    "The geographical origin of the sample as defined by the country or sea name followed by specific region name. Country or sea names should be chosen from the INSDC country list (http://insdc.org/country.html), or the GAZ ontology (v1.446) (http://bioportal.bioontology.org/visualize/40651)",
    true,
    "C29B0B10-D660-4582-9EB7-40C4F1699DD6"],
   ["40AC191F-BB36-4F4E-85FB-8B50ABEC8E10",
    "geographic location (region)",
    "The geographical origin of the sample as defined by the country or sea name followed by specific region name. Country or sea names should be chosen from the INSDC country list (http://insdc.org/country.html), or the GAZ ontology (v1.446) (http://bioportal.bioontology.org/visualize/40651)",
    true,
    "C29B0B10-D660-4582-9EB7-40C4F1699DD6"],
   ["40AC191F-BB36-4F4E-85FB-8B50ABEC8E10",
    "geographic location (specific location)",
    "The geographical origin of the sample as defined by the country or sea name followed by specific region name. Country or sea names should be chosen from the INSDC country list (http://insdc.org/country.html), or the GAZ ontology (v1.446) (http://bioportal.bioontology.org/visualize/40651)",
    true,
    "127036FF-EF19-4665-A9A9-7A6878D9813A"],
   ["40AC191F-BB36-4F4E-85FB-8B50ABEC8E10",
    "collection date",
    "The time of sampling, either as an instance (single point in time) or interval. In case no exact time is available, the date/time can be right truncated i.e. all of these are valid times: 2008-01-23T19:23:10+00:00; 2008-01-23T19:23:10; 2008-01-23; 2008-01; 2008; Except: 2008-01; 2008 all are ISO8601 compliant",
    true,
    "4CB79D83-E694-4ACF-AA60-DDADEE087B24"],
   ["40AC191F-BB36-4F4E-85FB-8B50ABEC8E10",
    "environment (biome)",
    "In environmental biome level are the major classes of ecologically similar communities of plants, animals, and other organisms. Biomes are defined based on factors such as plant structures, leaf types, plant spacing, and other factors like climate. Examples include: desert, taiga, deciduous woodland, or coral reef. EnvO (v1.53) terms listed under environmental biome can be found from the link: http://bioportal.bioontology.org/visualize/44405/?conceptid=ENVO%3A00000428",
    true,
    "C29B0B10-D660-4582-9EB7-40C4F1699DD6"],
   ["40AC191F-BB36-4F4E-85FB-8B50ABEC8E10",
    "environment (feature)",
    "Environmental feature level includes geographic environmental features. Examples include: harbor, cliff, or lake. EnvO (v1.53) terms listed under environmental feature can be found from the link: http://bioportal.bioontology.org/visualize/44405/?conceptid=ENVO%3A00002297",
    true,
    "C29B0B10-D660-4582-9EB7-40C4F1699DD6"],
   ["40AC191F-BB36-4F4E-85FB-8B50ABEC8E10",
    "environment (material)",
    "The environmental material level refers to the matter that was displaced by the sample, prior to the sampling event. Environmental matter terms are generally mass nouns. Examples include: air, soil, or water. EnvO (v1.53) terms listed under environmental matter can be found from the link: http://bioportal.bioontology.org/visualize/44405/?conceptid=ENVO%3A00010483",
    true,
    "C29B0B10-D660-4582-9EB7-40C4F1699DD6"],
   ["40AC191F-BB36-4F4E-85FB-8B50ABEC8E10",
    "environmental package",
    "MIGS/MIMS/MIENS extension for reporting of measurements and observations obtained from one or more of the environments where the sample was obtained. All environmental packages listed here are further defined in separate subtables. By giving the name of the environmental package, a selection of fields can be made from the subtables and can be reported",
    false,
    "C29B0B10-D660-4582-9EB7-40C4F1699DD6"],
   ["40AC191F-BB36-4F4E-85FB-8B50ABEC8E10",
    "subspecific genetic lineage",
    "This should provide further information about the genetic distinctness of this lineage by recording additional information i.e biovar, serovar, serotype, biovar, or any relevant genetic typing schemes like Group I plasmid. It can also contain alternative taxonomic information",
    false,
    "127036FF-EF19-4665-A9A9-7A6878D9813A"],
   ["40AC191F-BB36-4F4E-85FB-8B50ABEC8E10",
    "ploidy",
    "The ploidy level of the genome (e.g. allopolyploid, haploid, diploid, triploid, tetraploid). It has implications for the downstream study of duplicated gene and regions of the genomes (and perhaps for difficulties in assembly). For terms, please select terms listed under class ploidy (PATO:001374) of Phenotypic Quality Ontology (PATO), and for a browser of PATO (v1.269) please refer to http://bioportal.bioontology.org/visualize/44601/?conceptid=PATO%3A0001374",
    true,
    "C29B0B10-D660-4582-9EB7-40C4F1699DD6"],
   ["40AC191F-BB36-4F4E-85FB-8B50ABEC8E10",
    "number of replicons",
    "Reports the number of replicons in a nuclear genome of eukaryotes, in the genome of a bacterium or archaea or the number of segments in a segmented virus. Always applied to the haploid chromosome count of a eukaryote",
    true,
    "C6CB42CD-7C47-47A1-8704-F6582B510ACF"],
   ["40AC191F-BB36-4F4E-85FB-8B50ABEC8E10",
    "extrachromosomal elements",
    "Do plasmids exist of significant phenotypic consequence (e.g. ones that determine virulence or antibiotic resistance). Megaplasmids? Other plasmids (borrelia has 15+ plasmids)",
    false,
    "C6CB42CD-7C47-47A1-8704-F6582B510ACF"],
   ["40AC191F-BB36-4F4E-85FB-8B50ABEC8E10",
    "estimated size",
    "The estimated size of the genome prior to sequencing. Of particular importance in the sequencing of (eukaryotic) genome which could remain in draft form for a long or unspecified period.",
    true,
    "C6CB42CD-7C47-47A1-8704-F6582B510ACF"],
   ["40AC191F-BB36-4F4E-85FB-8B50ABEC8E10",
    "reference for biomaterial",
    "primary publication if isolated before genome publication; otherwise, primary genome report",
    false,
    "28A1F81A-8B4F-4940-BCD4-E39241BF15DC"],
   ["40AC191F-BB36-4F4E-85FB-8B50ABEC8E10",
    "source material identifiers",
    "The name of the culture collection, holder of the voucher or an institution. Could enumerate a list of common resources, just as the American Type Culture Collection (ATCC), German Collection of Microorganisms and Cell Cultures (DSMZ) etc. Can select not deposited",
    false,
    "127036FF-EF19-4665-A9A9-7A6878D9813A"],
   ["40AC191F-BB36-4F4E-85FB-8B50ABEC8E10",
    "known pathogenicity",
    "To what is the entity pathogenic. ",
    false,
    "C29B0B10-D660-4582-9EB7-40C4F1699DD6"],
   ["40AC191F-BB36-4F4E-85FB-8B50ABEC8E10",
    "propagation",
    "This field is specific to different taxa. For phages: lytic/lysogenic, for plasmids: incompatibility group (Note: there is the strong opinion to name phage propagation obligately lytic or temperate, therefore we also give this choice",
    true,
    "C29B0B10-D660-4582-9EB7-40C4F1699DD6"],
   ["40AC191F-BB36-4F4E-85FB-8B50ABEC8E10",
    "isolation and growth condition",
    "Publication reference in the form of pubmed ID (pmid), digital object identifier (doi) or url for isolation and growth condition specifications of the organism/material",
    true,
    "28A1F81A-8B4F-4940-BCD4-E39241BF15DC"],
   ["40AC191F-BB36-4F4E-85FB-8B50ABEC8E10",
    "sample collection device or method",
    "The method or deviced employed for collecting the sample",
    false,
    "127036FF-EF19-4665-A9A9-7A6878D9813A"],
   ["40AC191F-BB36-4F4E-85FB-8B50ABEC8E10",
    "sample material processing",
    "Any processing applied to the sample during or after retrieving the sample from environment. This field accepts OBI, for a browser of OBI (v1.0) terms please see http://bioportal.bioontology.org/visualize/40832",
    false,
    "127036FF-EF19-4665-A9A9-7A6878D9813A"],
   ["40AC191F-BB36-4F4E-85FB-8B50ABEC8E10",
    "amount or size of sample collected",
    "Amount or size of sample (volume, mass or area) that was collected",
    false,
    "29F9F4FD-594C-493D-9560-FE8851084870"],
   ["40AC191F-BB36-4F4E-85FB-8B50ABEC8E10",
    "nucleic acid extraction",
    "Link to a literature reference, electronic resource or a standard operating procedure (SOP)",
    true,
    "28A1F81A-8B4F-4940-BCD4-E39241BF15DC"],
   ["40AC191F-BB36-4F4E-85FB-8B50ABEC8E10",
    "nucleic acid amplification",
    "Link to a literature reference, electronic resource or a standard operating procedure (SOP)",
    true,
    "28A1F81A-8B4F-4940-BCD4-E39241BF15DC"],
   ["40AC191F-BB36-4F4E-85FB-8B50ABEC8E10",
    "adapters",
    "Adapters provide priming sequences for both amplification and sequencing of the sample-library fragments. Both adapters should be reported; in uppercase letters"
    true,
    "127036FF-EF19-4665-A9A9-7A6878D9813A"],
   ["40AC191F-BB36-4F4E-85FB-8B50ABEC8E10",
    "sequencing method",
    "Sequencing method used; e.g. Sanger, pyrosequencing, ABI-solid",
    true,
    "127036FF-EF19-4665-A9A9-7A6878D9813A"],
   ["40AC191F-BB36-4F4E-85FB-8B50ABEC8E10",
    "assembly (method)",
    "How was the assembly done (e.g. with a text based assembler like phrap or a flowgram assembler)",
    true,
    "127036FF-EF19-4665-A9A9-7A6878D9813A"],
   ["40AC191F-BB36-4F4E-85FB-8B50ABEC8E10",
    "assembly (error)",
    "Estimated error rate associated with the finished sequences (e.g. error rate of 1 in 1000 bp)",
    true,
    "127036FF-EF19-4665-A9A9-7A6878D9813A"],
   ["40AC191F-BB36-4F4E-85FB-8B50ABEC8E10",
    "assembly (calculation)",
    "the method of calculation",
    true,
    "127036FF-EF19-4665-A9A9-7A6878D9813A"],
   ["40AC191F-BB36-4F4E-85FB-8B50ABEC8E10",
    "assembly name",
    "Name of the assembly provided by the submitter that is used in the genome browsers and in the community",
    false,
    "127036FF-EF19-4665-A9A9-7A6878D9813A"],
   ["40AC191F-BB36-4F4E-85FB-8B50ABEC8E10",
    "assembly version",
    "Version of the assembly provided by the submitter that is used in the genome browsers and in the community",
    false,
    "127036FF-EF19-4665-A9A9-7A6878D9813A"],
   ["40AC191F-BB36-4F4E-85FB-8B50ABEC8E10",
    "finishing strategy (completion)",
    "Was the genome project intended to produce a complete or draft genome",
    true,
    "C29B0B10-D660-4582-9EB7-40C4F1699DD6"],
   ["40AC191F-BB36-4F4E-85FB-8B50ABEC8E10",
    "finishing strategy (coverage)",
    "Coverage, the fold coverage of the sequencing expressed as 2x, 3x, 18x  etc",
    true,
    "C6CB42CD-7C47-47A1-8704-F6582B510ACF"],
   ["40AC191F-BB36-4F4E-85FB-8B50ABEC8E10",
    "finishing strategy (contigs)",
    "How many contigs were produced for the genome",
    true,
    "C6CB42CD-7C47-47A1-8704-F6582B510ACF"],
   ["40AC191F-BB36-4F4E-85FB-8B50ABEC8E10",
    "annotation source",
    "For cases where annotation was provided by a community jamboree or model organism database rather than by a specific submitter",
    false,
    "127036FF-EF19-4665-A9A9-7A6878D9813A"],
   ["40AC191F-BB36-4F4E-85FB-8B50ABEC8E10",
    "relevant electronic resources",
    "",
    false,
    "28A1F81A-8B4F-4940-BCD4-E39241BF15DC"],
   ["40AC191F-BB36-4F4E-85FB-8B50ABEC8E10",
    "relevant standard operating procedures",
    "Standard operating procedures used in assembly and/or annotation of genomes, metagenomes or environmental sequences",
    false,
    "28A1F81A-8B4F-4940-BCD4-E39241BF15DC"]])

(def ^:private mims-attributes
  [["F52A4D57-00AF-43EC-97D5-1C7E7779F6C3",
    "submitted to insdc",
    "Depending on the study (large-scale e.g. done with next generation sequencing technology, or small-scale) sequences have to be submitted to SRA (Sequence Read Archive), DRA (DDBJ Read Archive) or via the classical Webin/Sequin systems to Genbank, ENA and DDBJ",
    true,
    "8130EC25-2452-4FF0-B66A-D9D3A6350816"],
   ["F52A4D57-00AF-43EC-97D5-1C7E7779F6C3",
    "investigation type",
    "Nucleic Acid Sequence Report is the root element of all MIGS/MIMS compliant reports as standardized by Genomic Standards Consortium. This field is either eukaryote,bacteria,virus,plasmid,organelle, metagenome, miens-survey or miens-culture",
    true,
    "C29B0B10-D660-4582-9EB7-40C4F1699DD6"],
   ["F52A4D57-00AF-43EC-97D5-1C7E7779F6C3",
    "project name",
    "Name of the project within which the sequencing was organized",
    true,
    "127036FF-EF19-4665-A9A9-7A6878D9813A"],
   ["F52A4D57-00AF-43EC-97D5-1C7E7779F6C3",
    "experimental factor",
    "Experimental factors are essentially the variable aspects of an experiment design which can be used to describe an experiment, or set of experiments, in an increasingly detailed manner. This field accepts ontology terms from Experimental Factor Ontology (EFO) and/or Ontology for Biomedical Investigations (OBI). For a browser of EFO (v132) terms, please see http://bioportal.bioontology.org/visualize/44641; for a browser of OBI (v1.0) terms please see http://bioportal.bioontology.org/visualize/40832",
    false,
    "127036FF-EF19-4665-A9A9-7A6878D9813A"],
   ["F52A4D57-00AF-43EC-97D5-1C7E7779F6C3",
    "geographic location (latitude)",
    "The geographical origin of the sample as defined by latitude and longitude. The values should be reported in decimal degrees and in WGS84 system",
    true,
    "29F9F4FD-594C-493D-9560-FE8851084870"],
   ["F52A4D57-00AF-43EC-97D5-1C7E7779F6C3",
    "geographic location (longitude)",
    "The geographical origin of the sample as defined by latitude and longitude. The values should be reported in decimal degrees and in WGS84 system",
    true,
    "29F9F4FD-594C-493D-9560-FE8851084870"],
   ["F52A4D57-00AF-43EC-97D5-1C7E7779F6C3",
    "geographic location (country and/or sea)",
    "The geographical origin of the sample as defined by the country or sea name followed by specific region name. Country or sea names should be chosen from the INSDC country list (http://insdc.org/country.html), or the GAZ ontology (v1.446) (http://bioportal.bioontology.org/visualize/40651)",
    true,
    "C29B0B10-D660-4582-9EB7-40C4F1699DD6"],
   ["F52A4D57-00AF-43EC-97D5-1C7E7779F6C3",
    "geographic location (region)",
    "The geographical origin of the sample as defined by the country or sea name followed by specific region name. Country or sea names should be chosen from the INSDC country list (http://insdc.org/country.html), or the GAZ ontology (v1.446) (http://bioportal.bioontology.org/visualize/40651)",
    true,
    "C29B0B10-D660-4582-9EB7-40C4F1699DD6"],
   ["F52A4D57-00AF-43EC-97D5-1C7E7779F6C3",
    "geographic location (specific location)",
    "The geographical origin of the sample as defined by the country or sea name followed by specific region name. Country or sea names should be chosen from the INSDC country list (http://insdc.org/country.html), or the GAZ ontology (v1.446) (http://bioportal.bioontology.org/visualize/40651)",
    true,
    "127036FF-EF19-4665-A9A9-7A6878D9813A"],
   ["F52A4D57-00AF-43EC-97D5-1C7E7779F6C3",
    "collection date",
    "The time of sampling, either as an instance (single point in time) or interval. In case no exact time is available, the date/time can be right truncated i.e. all of these are valid times: 2008-01-23T19:23:10+00:00; 2008-01-23T19:23:10; 2008-01-23; 2008-01; 2008; Except: 2008-01; 2008 all are ISO8601 compliant",
    true,
    "4CB79D83-E694-4ACF-AA60-DDADEE087B24"],
   ["F52A4D57-00AF-43EC-97D5-1C7E7779F6C3",
    "environment (biome)",
    "In environmental biome level are the major classes of ecologically similar communities of plants, animals, and other organisms. Biomes are defined based on factors such as plant structures, leaf types, plant spacing, and other factors like climate. Examples include: desert, taiga, deciduous woodland, or coral reef. EnvO (v1.53) terms listed under environmental biome can be found from the link: http://bioportal.bioontology.org/visualize/44405/?conceptid=ENVO%3A00000428",
    true,
    "C29B0B10-D660-4582-9EB7-40C4F1699DD6"],
   ["F52A4D57-00AF-43EC-97D5-1C7E7779F6C3",
    "environment (feature)",
    "Environmental feature level includes geographic environmental features. Examples include: harbor, cliff, or lake. EnvO (v1.53) terms listed under environmental feature can be found from the link: http://bioportal.bioontology.org/visualize/44405/?conceptid=ENVO%3A00002297",
    true,
    "C29B0B10-D660-4582-9EB7-40C4F1699DD6"],
   ["F52A4D57-00AF-43EC-97D5-1C7E7779F6C3",
    "environment (material)",
    "The environmental material level refers to the matter that was displaced by the sample, prior to the sampling event. Environmental matter terms are generally mass nouns. Examples include: air, soil, or water. EnvO (v1.53) terms listed under environmental matter can be found from the link: http://bioportal.bioontology.org/visualize/44405/?conceptid=ENVO%3A00010483",
    true,
    "C29B0B10-D660-4582-9EB7-40C4F1699DD6"],
   ["F52A4D57-00AF-43EC-97D5-1C7E7779F6C3",
    "environmental package",
    "MIGS/MIMS/MIENS extension for reporting of measurements and observations obtained from one or more of the environments where the sample was obtained. All environmental packages listed here are further defined in separate subtables. By giving the name of the environmental package, a selection of fields can be made from the subtables and can be reported",
    true,
    "C29B0B10-D660-4582-9EB7-40C4F1699DD6"],
   ["F52A4D57-00AF-43EC-97D5-1C7E7779F6C3",
    "reference for biomaterial",
    "primary publication if isolated before genome publication; otherwise, primary genome report",
    false,
    "28A1F81A-8B4F-4940-BCD4-E39241BF15DC"],
   ["F52A4D57-00AF-43EC-97D5-1C7E7779F6C3",
    "source material identifiers",
    "The name of the culture collection, holder of the voucher or an institution. Could enumerate a list of common resources, just as the American Type Culture Collection (ATCC), German Collection of Microorganisms and Cell Cultures (DSMZ) etc. Can select not deposited",
    false,
    "127036FF-EF19-4665-A9A9-7A6878D9813A"],
   ["F52A4D57-00AF-43EC-97D5-1C7E7779F6C3",
    "relationship to oxygen",
    "Is this organism an aerobe, anaerobe? Please note that aerobic and anaerobic are valid descriptors for microbial environments",
    false,
    "C29B0B10-D660-4582-9EB7-40C4F1699DD6"],
   ["F52A4D57-00AF-43EC-97D5-1C7E7779F6C3",
    "sample collection device or method",
    "The method or deviced employed for collecting the sample",
    false,
    "127036FF-EF19-4665-A9A9-7A6878D9813A"],
   ["F52A4D57-00AF-43EC-97D5-1C7E7779F6C3",
    "sample material processing",
    "Any processing applied to the sample during or after retrieving the sample from environment. This field accepts OBI, for a browser of OBI (v1.0) terms please see http://bioportal.bioontology.org/visualize/40832",
    false,
    "127036FF-EF19-4665-A9A9-7A6878D9813A"],
   ["F52A4D57-00AF-43EC-97D5-1C7E7779F6C3",
    "amount or size of sample collected",
    "Amount or size of sample (volume, mass or area) that was collected",
    false,
    "29F9F4FD-594C-493D-9560-FE8851084870"],
   ["F52A4D57-00AF-43EC-97D5-1C7E7779F6C3",
    "nucleic acid extraction",
    "Link to a literature reference, electronic resource or a standard operating procedure (SOP)",
    false,
    "28A1F81A-8B4F-4940-BCD4-E39241BF15DC"],
   ["F52A4D57-00AF-43EC-97D5-1C7E7779F6C3",
    "nucleic acid amplification",
    "Link to a literature reference, electronic resource or a standard operating procedure (SOP)",
    false,
    "28A1F81A-8B4F-4940-BCD4-E39241BF15DC"],
   ["F52A4D57-00AF-43EC-97D5-1C7E7779F6C3",
    "library size",
    "Total number of clones in the library prepared for the project",
    false,
    "C6CB42CD-7C47-47A1-8704-F6582B510ACF"],
   ["F52A4D57-00AF-43EC-97D5-1C7E7779F6C3",
    "library reads sequenced",
    "Total number of clones sequenced from the library",
    false,
    "C6CB42CD-7C47-47A1-8704-F6582B510ACF"],
   ["F52A4D57-00AF-43EC-97D5-1C7E7779F6C3",
    "library construction method",
    "Library construction method used for clone libraries",
    false,
    "127036FF-EF19-4665-A9A9-7A6878D9813A"],
   ["F52A4D57-00AF-43EC-97D5-1C7E7779F6C3",
    "library vector",
    "Cloning vector type(s) used in construction of libraries",
    false,
    "127036FF-EF19-4665-A9A9-7A6878D9813A"],
   ["F52A4D57-00AF-43EC-97D5-1C7E7779F6C3",
    "library screening strategy",
    "Specific enrichment or screening methods applied before and/or after creating clone libraries",
    false,
    "127036FF-EF19-4665-A9A9-7A6878D9813A"],
   ["F52A4D57-00AF-43EC-97D5-1C7E7779F6C3",
    "multiplex identifiers",
    "Molecular barcodes, called Multiplex Identifiers (MIDs), that are used to specifically tag unique samples in a sequencing run. Sequence should be reported in uppercase letters",
    false,
    "127036FF-EF19-4665-A9A9-7A6878D9813A"],
   ["F52A4D57-00AF-43EC-97D5-1C7E7779F6C3",
    "adapters",
    "Adapters provide priming sequences for both amplification and sequencing of the sample-library fragments. Both adapters should be reported; in uppercase letters,no",
    false,
    "127036FF-EF19-4665-A9A9-7A6878D9813A"],
   ["F52A4D57-00AF-43EC-97D5-1C7E7779F6C3",
    "sequencing method",
    "Sequencing method used; e.g. Sanger, pyrosequencing, ABI-solid",
    true,
    "127036FF-EF19-4665-A9A9-7A6878D9813A"],
   ["F52A4D57-00AF-43EC-97D5-1C7E7779F6C3",
    "assembly (method)",
    "How was the assembly done (e.g. with a text based assembler like phrap or a flowgram assembler)",
    true,
    "127036FF-EF19-4665-A9A9-7A6878D9813A"],
   ["F52A4D57-00AF-43EC-97D5-1C7E7779F6C3",
    "assembly (error)",
    "Estimated error rate associated with the finished sequences (e.g. error rate of 1 in 1000 bp)",
    true,
    "127036FF-EF19-4665-A9A9-7A6878D9813A"],
   ["F52A4D57-00AF-43EC-97D5-1C7E7779F6C3",
    "assembly (calculation)",
    "the method of calculation",
    true,
    "127036FF-EF19-4665-A9A9-7A6878D9813A"],
   ["F52A4D57-00AF-43EC-97D5-1C7E7779F6C3",
    "assembly name",
    "Name of the assembly provided by the submitter that is used in the genome browsers and in the community",
    false,
    "127036FF-EF19-4665-A9A9-7A6878D9813A"],
   ["F52A4D57-00AF-43EC-97D5-1C7E7779F6C3",
    "assembly version",
    "Version of the assembly provided by the submitter that is used in the genome browsers and in the community",
    false,
    "127036FF-EF19-4665-A9A9-7A6878D9813A"],
   ["F52A4D57-00AF-43EC-97D5-1C7E7779F6C3",
    "finishing strategy (completion)",
    "Was the genome project intended to produce a complete or draft genome",
    true,
    "C29B0B10-D660-4582-9EB7-40C4F1699DD6"],
   ["F52A4D57-00AF-43EC-97D5-1C7E7779F6C3",
    "finishing strategy (coverage)",
    "Coverage, the fold coverage of the sequencing expressed as 2x, 3x, 18x  etc",
    true,
    "C6CB42CD-7C47-47A1-8704-F6582B510ACF"],
   ["F52A4D57-00AF-43EC-97D5-1C7E7779F6C3",
    "finishing strategy (contigs)",
    "How many contigs were produced for the genome",
    true,
    "C6CB42CD-7C47-47A1-8704-F6582B510ACF"],
   ["F52A4D57-00AF-43EC-97D5-1C7E7779F6C3",
    "annotation source",
    "For cases where annotation was provided by a community jamboree or model organism database rather than by a specific submitter",
    false,
    "127036FF-EF19-4665-A9A9-7A6878D9813A"],
   ["F52A4D57-00AF-43EC-97D5-1C7E7779F6C3",
    "relevant electronic resources",
    "",
    false,
    "28A1F81A-8B4F-4940-BCD4-E39241BF15DC"],
   ["F52A4D57-00AF-43EC-97D5-1C7E7779F6C3",
    "relevant standard operating procedures",
    "Standard operating procedures used in assembly and/or annotation of genomes, metagenomes or environmental sequences",
    false,
    "28A1F81A-8B4F-4940-BCD4-E39241BF15DC"]])

(defn- add-metadata-attributes
  "Adds metadata attributes to the database."
  [metadata-attributes]
  (-> (insert* :metadata_attributes)
      (values (map (fn [[template-id name desc required? value-type-id] display-order]
                     {:id            (UUID/randomUUID)
                      :template_id   (str->uuid template-id)
                      :name          name
                      :description   desc
                      :required      required?
                      :value_type_id (str->uuid value-type-id)
                      :display_order display-order})
                   metadata-attributes
                   (range)))
      (insert)))

(defn- add-metadata-templates
  "Adds the new metadata templates to the database."
  []
  (println "\t* adding new metadata templates")
  (-> (insert* :metadata_templates)
      (values (map (fn [[id name]] {:id (str->uuid id) :name name}) metadata-templates))
      (insert))
  (dorun (map add-metadata-attributes [migs-attributes mims-attributes])))

(defn convert
  "Performs the conversion for database version 1.8.4:20130107.01."
  []
  (println "Performing conversion for" version)
  (add-metadata-templates))
